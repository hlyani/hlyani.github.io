
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Heat 相关 · hlyani</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="hlyani">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="qga.html" />
    
    
    <link rel="prev" href="devstack.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../proxy.html">
            
                <a href="../proxy.html">
            
                    
                    proxy 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../pip.html">
            
                <a href="../pip.html">
            
                    
                    pip 源相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../linux_source.html">
            
                <a href="../linux_source.html">
            
                    
                    linux 源相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../git.html">
            
                <a href="../git.html">
            
                    
                    git 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../skills.html">
            
                <a href="../skills.html">
            
                    
                    skills
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    容器相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../docker/usual_software.html">
            
                <a href="../docker/usual_software.html">
            
                    
                    常用软件安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../docker/kubeflow.html">
            
                <a href="../docker/kubeflow.html">
            
                    
                    kubeflow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../docker/kube-scheduler.html">
            
                <a href="../docker/kube-scheduler.html">
            
                    
                    kube-scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../docker/volcano.html">
            
                <a href="../docker/volcano.html">
            
                    
                    volcano
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../docker/kubeasz.html">
            
                <a href="../docker/kubeasz.html">
            
                    
                    kubeasz
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../docker/calico.html">
            
                <a href="../docker/calico.html">
            
                    
                    calico
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../docker/ingress.html">
            
                <a href="../docker/ingress.html">
            
                    
                    ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../docker/apisix.html">
            
                <a href="../docker/apisix.html">
            
                    
                    apisix
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="../docker/kubebuilder.html">
            
                <a href="../docker/kubebuilder.html">
            
                    
                    kubebuilder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="../docker/containerd.html">
            
                <a href="../docker/containerd.html">
            
                    
                    Containerd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="../docker/buildah.html">
            
                <a href="../docker/buildah.html">
            
                    
                    Buildah
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="../docker/buildkit.html">
            
                <a href="../docker/buildkit.html">
            
                    
                    Buildkit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="../docker/docker.html">
            
                <a href="../docker/docker.html">
            
                    
                    docker 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.14" data-path="../docker/multiarch.html">
            
                <a href="../docker/multiarch.html">
            
                    
                    容器交叉编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.15" data-path="../docker/kubeedge.html">
            
                <a href="../docker/kubeedge.html">
            
                    
                    kubeedge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.16" data-path="../docker/k3s_deploy.html">
            
                <a href="../docker/k3s_deploy.html">
            
                    
                    k3s 安装与使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.17" data-path="../docker/k3s_make.html">
            
                <a href="../docker/k3s_make.html">
            
                    
                    k3s 源码编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.18" data-path="../docker/rancher.html">
            
                <a href="../docker/rancher.html">
            
                    
                    rancher 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.19" data-path="../docker/debootstrap.html">
            
                <a href="../docker/debootstrap.html">
            
                    
                    容器基础镜像构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.20" data-path="../docker/overlay2.html">
            
                <a href="../docker/overlay2.html">
            
                    
                    overlay2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.21" data-path="../docker/k8s.html">
            
                <a href="../docker/k8s.html">
            
                    
                    k8s 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.22" data-path="../docker/k8s_yaml.html">
            
                <a href="../docker/k8s_yaml.html">
            
                    
                    k8s 常用 yaml
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.23" data-path="../docker/k8s_deploy.html">
            
                <a href="../docker/k8s_deploy.html">
            
                    
                    k8s 安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.24" data-path="../docker/k8s_use.html">
            
                <a href="../docker/k8s_use.html">
            
                    
                    k8s 使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.25" data-path="../docker/k8s_hpa.html">
            
                <a href="../docker/k8s_hpa.html">
            
                    
                    k8s hpa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.26" data-path="../docker/k8s_ceph.html">
            
                <a href="../docker/k8s_ceph.html">
            
                    
                    k8s 使用 ceph 储存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.27" data-path="../docker/chartmuseum.html">
            
                <a href="../docker/chartmuseum.html">
            
                    
                    chartmuseum 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.28" data-path="../docker/harbor.html">
            
                <a href="../docker/harbor.html">
            
                    
                    harbor 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.29" data-path="../docker/helm.html">
            
                <a href="../docker/helm.html">
            
                    
                    helm 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.30" data-path="../docker/docker_net.html">
            
                <a href="../docker/docker_net.html">
            
                    
                    docker 网络相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.31" data-path="../docker/docker_swarm.html">
            
                <a href="../docker/docker_swarm.html">
            
                    
                    docker swarm 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.32" data-path="../docker/docker_compose.html">
            
                <a href="../docker/docker_compose.html">
            
                    
                    docker compose 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.33" data-path="../docker/docker_registry.html">
            
                <a href="../docker/docker_registry.html">
            
                    
                    docker registry 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.34" data-path="../docker/openshift.html">
            
                <a href="../docker/openshift.html">
            
                    
                    openshift 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.35" data-path="../docker/convert_iso_to_docker_img.html">
            
                <a href="../docker/convert_iso_to_docker_img.html">
            
                    
                    将ISO镜像转换为docker镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.36" data-path="../docker/mount_usb_to_docker.html">
            
                <a href="../docker/mount_usb_to_docker.html">
            
                    
                    挂载USB到docker容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.37" data-path="../docker/local_static_provisioner.html">
            
                <a href="../docker/local_static_provisioner.html">
            
                    
                    local-static-provisioner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.38" data-path="../docker/change_ssl.md">
            
                <span>
            
                    
                    change_ssl
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Golang 相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../golang/go.html">
            
                <a href="../golang/go.html">
            
                    
                    golang 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../golang/go_authens.md">
            
                <span>
            
                    
                    GO Authens 代理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    OpenStack 相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="whatisruntime.html">
            
                <a href="whatisruntime.html">
            
                    
                    区分当前系统运行环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="qemu_make.html">
            
                <a href="qemu_make.html">
            
                    
                    QEMU 源码编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="openstack.html">
            
                <a href="openstack.html">
            
                    
                    OpenStack 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="openstack_faq.html">
            
                <a href="openstack_faq.html">
            
                    
                    OpenStack 中遇到的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="delete_cinder_volume.html">
            
                <a href="delete_cinder_volume.html">
            
                    
                    删除 Cinder 僵尸实例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="add_nic_to_vm.html">
            
                <a href="add_nic_to_vm.html">
            
                    
                    给虚拟机添加网卡
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="make_openstack_image.html">
            
                <a href="make_openstack_image.html">
            
                    
                    制作 OpenStack 镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="openstack_win_vm_diaplay.html">
            
                <a href="openstack_win_vm_diaplay.html">
            
                    
                    OpenStack Windows 虚拟机分辨率问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="kolla_network.html">
            
                <a href="kolla_network.html">
            
                    
                    Kolla 网络规划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="kolla_deploy.html">
            
                <a href="kolla_deploy.html">
            
                    
                    Kolla 部署相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="kolla_image_build.html">
            
                <a href="kolla_image_build.html">
            
                    
                    Kolla 镜像构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="devstack.html">
            
                <a href="devstack.html">
            
                    
                    Devstack 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9.13" data-path="heat.html">
            
                <a href="heat.html">
            
                    
                    Heat 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.14" data-path="qga.html">
            
                <a href="qga.html">
            
                    
                    qemu-guest-agent 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.15" data-path="ovs.html">
            
                <a href="ovs.html">
            
                    
                    OVS 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.16" data-path="migrate_to_other_platform.html">
            
                <a href="migrate_to_other_platform.html">
            
                    
                    迁移虚拟机到其他平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.17" data-path="openstack_hygon_patch.html">
            
                <a href="openstack_hygon_patch.html">
            
                    
                    OpenStack对hygon的兼容
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.18" data-path="lsf_install_openstack.html">
            
                <a href="lsf_install_openstack.html">
            
                    
                    Lfs上安装OpenStack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Linux 相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../linux/alpine.html">
            
                <a href="../linux/alpine.html">
            
                    
                    alpine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../linux/redis.html">
            
                <a href="../linux/redis.html">
            
                    
                    redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../linux/ib.html">
            
                <a href="../linux/ib.html">
            
                    
                    ib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../linux/loki.html">
            
                <a href="../linux/loki.html">
            
                    
                    loki
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../linux/http_status_code.html">
            
                <a href="../linux/http_status_code.html">
            
                    
                    HTTP 状态码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../linux/yq.html">
            
                <a href="../linux/yq.html">
            
                    
                    yq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../linux/conda.html">
            
                <a href="../linux/conda.html">
            
                    
                    conda
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../linux/minio.html">
            
                <a href="../linux/minio.html">
            
                    
                    minio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../linux/prometheus.html">
            
                <a href="../linux/prometheus.html">
            
                    
                    prometheus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="../linux/test_tools.html">
            
                <a href="../linux/test_tools.html">
            
                    
                    test_tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="../linux/gitlab.html">
            
                <a href="../linux/gitlab.html">
            
                    
                    gitlab
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="../linux/etcd.html">
            
                <a href="../linux/etcd.html">
            
                    
                    etcd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="../linux/frp.html">
            
                <a href="../linux/frp.html">
            
                    
                    frp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="../linux/synology.html">
            
                <a href="../linux/synology.html">
            
                    
                    synology
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.15" data-path="../linux/adb.md">
            
                <span>
            
                    
                    adb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.16" data-path="../linux/netns.html">
            
                <a href="../linux/netns.html">
            
                    
                    netns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.17" data-path="../linux/uboot.html">
            
                <a href="../linux/uboot.html">
            
                    
                    uboot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.18" data-path="../linux/linux_network.html">
            
                <a href="../linux/linux_network.html">
            
                    
                    linux 网络配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.19" data-path="../linux/qemu_img.html">
            
                <a href="../linux/qemu_img.html">
            
                    
                    qemu-img
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.20" data-path="../linux/systemd.html">
            
                <a href="../linux/systemd.html">
            
                    
                    systemd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.21" data-path="../linux/dd.html">
            
                <a href="../linux/dd.html">
            
                    
                    dd 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.22" data-path="../linux/kernel_make.html">
            
                <a href="../linux/kernel_make.html">
            
                    
                    kernel 内核编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.23" data-path="../nodejs.html">
            
                <a href="../nodejs.html">
            
                    
                    nodejs 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.24" data-path="../linux/unixbench.html">
            
                <a href="../linux/unixbench.html">
            
                    
                    UnixBench 虚拟机性能测试工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.25" data-path="../linux/pypi_local_source.html">
            
                <a href="../linux/pypi_local_source.html">
            
                    
                    pip 本地源
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.26" data-path="../linux/lvm.html">
            
                <a href="../linux/lvm.html">
            
                    
                    LVM 逻辑卷相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.27" data-path="../linux/tcpdump.html">
            
                <a href="../linux/tcpdump.html">
            
                    
                    tcpdump 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.28" data-path="../linux/libvirt.html">
            
                <a href="../linux/libvirt.html">
            
                    
                    libvirt 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.29" data-path="../linux/linux.html">
            
                <a href="../linux/linux.html">
            
                    
                    Linux 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.30" data-path="../linux/change_centos_boot_kernel.html">
            
                <a href="../linux/change_centos_boot_kernel.html">
            
                    
                    CentOS 修改默认启动内核
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.31" data-path="../linux/vim.html">
            
                <a href="../linux/vim.html">
            
                    
                    Vim 常用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.32" data-path="../linux/nested.html">
            
                <a href="../linux/nested.html">
            
                    
                    嵌套虚拟化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.33" data-path="../linux/net_bridge.html">
            
                <a href="../linux/net_bridge.html">
            
                    
                    创建网桥
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.34" data-path="../linux/nic_bond.html">
            
                <a href="../linux/nic_bond.html">
            
                    
                    网络端口聚合绑定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.35" data-path="../linux/ramdisk.html">
            
                <a href="../linux/ramdisk.html">
            
                    
                    虚拟内存盘
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.36" data-path="../linux/ssh_interval.html">
            
                <a href="../linux/ssh_interval.html">
            
                    
                    ssh 自动断开
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.37" data-path="../linux/ssh_forwading.html">
            
                <a href="../linux/ssh_forwading.html">
            
                    
                    ssh 转发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.38" data-path="../linux/samba.html">
            
                <a href="../linux/samba.html">
            
                    
                    Samba 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.39" data-path="../linux/ftp.html">
            
                <a href="../linux/ftp.html">
            
                    
                    ftp 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.40" data-path="../linux/iscsi.html">
            
                <a href="../linux/iscsi.html">
            
                    
                    iscsi 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.41" data-path="../linux/guestfish.html">
            
                <a href="../linux/guestfish.html">
            
                    
                    guestfish 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.42" data-path="../linux/nginx.html">
            
                <a href="../linux/nginx.html">
            
                    
                    nginx 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.43" data-path="../linux/haproxy.html">
            
                <a href="../linux/haproxy.html">
            
                    
                    haproxy 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.44" data-path="../linux/build_pypi.html">
            
                <a href="../linux/build_pypi.html">
            
                    
                    发布pypi软件包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.45" data-path="../linux/mysql.html">
            
                <a href="../linux/mysql.html">
            
                    
                    mysql 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.46" data-path="../linux/ssr_privoxy.html">
            
                <a href="../linux/ssr_privoxy.html">
            
                    
                    ssr privoxy 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.47" data-path="../linux/proxychains_ng.html">
            
                <a href="../linux/proxychains_ng.html">
            
                    
                    proxychains-ng 代理工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.48" data-path="../linux/virt_manager.html">
            
                <a href="../linux/virt_manager.html">
            
                    
                    virt-manager 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.49" data-path="../linux/linux_source.html">
            
                <a href="../linux/linux_source.html">
            
                    
                    Linux 源制作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.50" data-path="../linux/rpm_build.html">
            
                <a href="../linux/rpm_build.html">
            
                    
                    Python rpm编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.51" data-path="../linux/yum_install_conf_conflict.md">
            
                <span>
            
                    
                    yum 安装时文件冲突
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.52" data-path="../linux/crontabs.html">
            
                <a href="../linux/crontabs.html">
            
                    
                    crontabs 计划任务相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.53" data-path="../linux/diy_centos_iso.html">
            
                <a href="../linux/diy_centos_iso.html">
            
                    
                    CentOS iso 镜像定制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.54" data-path="../linux/ansible.html">
            
                <a href="../linux/ansible.html">
            
                    
                    ansible 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.55" data-path="../linux/cobbler.html">
            
                <a href="../linux/cobbler.html">
            
                    
                    cobbler 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.56" data-path="../linux/apache_multi_ports.html">
            
                <a href="../linux/apache_multi_ports.html">
            
                    
                    apache 多端口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.57" data-path="../linux/dns.html">
            
                <a href="../linux/dns.html">
            
                    
                    搭建本地 dns 服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.58" data-path="../linux/linux_u.html">
            
                <a href="../linux/linux_u.html">
            
                    
                    Linux U盘占用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.59" data-path="../linux/ssh.html">
            
                <a href="../linux/ssh.html">
            
                    
                    ssh 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.60" data-path="../linux/mdadm.html">
            
                <a href="../linux/mdadm.html">
            
                    
                    软 raid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.61" data-path="../linux/root_extend.html">
            
                <a href="../linux/root_extend.html">
            
                    
                    将 home 目录空间扩容到根目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.62" data-path="../linux/vm_to_router.html">
            
                <a href="../linux/vm_to_router.html">
            
                    
                    将虚拟机作为router
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    Ceph 相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../ceph/ceph.html">
            
                <a href="../ceph/ceph.html">
            
                    
                    Ceph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../ceph/crushmap.html">
            
                <a href="../ceph/crushmap.html">
            
                    
                    crushmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../ceph/cephconf.html">
            
                <a href="../ceph/cephconf.html">
            
                    
                    ceph.conf
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Python 相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../python/ruff.html">
            
                <a href="../python/ruff.html">
            
                    
                    ruff 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../python/xpath.html">
            
                <a href="../python/xpath.html">
            
                    
                    xpath 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../python/regular_expression.html">
            
                <a href="../python/regular_expression.html">
            
                    
                    正则表达式相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../python/django.html">
            
                <a href="../python/django.html">
            
                    
                    Django 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../python/flask.html">
            
                <a href="../python/flask.html">
            
                    
                    Flask 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../python/python.html">
            
                <a href="../python/python.html">
            
                    
                    Python 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../python/python_obfuscated_code.html">
            
                <a href="../python/python_obfuscated_code.html">
            
                    
                    Python 代码混淆
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../python/sqlalchemy.html">
            
                <a href="../python/sqlalchemy.html">
            
                    
                    Python Sqlalchemy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.9" data-path="../python/python_logging.html">
            
                <a href="../python/python_logging.html">
            
                    
                    Python logging模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.10" data-path="../python/python_decorators.html">
            
                <a href="../python/python_decorators.html">
            
                    
                    Python 装饰器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.11" data-path="../python/python_file.html">
            
                <a href="../python/python_file.html">
            
                    
                    Python 文件操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.12" data-path="../python/scrapy.html">
            
                <a href="../python/scrapy.html">
            
                    
                    scrapy 爬虫
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.13" data-path="../python/urllib2.html">
            
                <a href="../python/urllib2.html">
            
                    
                    urllib2 爬虫
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.14" data-path="../python/yield.html">
            
                <a href="../python/yield.html">
            
                    
                    yield
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.15" data-path="../python/jinja2.html">
            
                <a href="../python/jinja2.html">
            
                    
                    Jinja2 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.16" data-path="../python/python_code_standards.html">
            
                <a href="../python/python_code_standards.html">
            
                    
                    Python 代码规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    大数据相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../bigdata/bigdata_deploy.html">
            
                <a href="../bigdata/bigdata_deploy.html">
            
                    
                    大数据相关环境安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../bigdata/hadoop.html">
            
                <a href="../bigdata/hadoop.html">
            
                    
                    Hadoop 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../bigdata/hadoop_single.html">
            
                <a href="../bigdata/hadoop_single.html">
            
                    
                    Hadoop 单机伪分布式部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../bigdata/hadoop_cluster.html">
            
                <a href="../bigdata/hadoop_cluster.html">
            
                    
                    Hadoop 集群搭建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../bigdata/hive.html">
            
                <a href="../bigdata/hive.html">
            
                    
                    Hive 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="../bigdata/hbase.html">
            
                <a href="../bigdata/hbase.html">
            
                    
                    Hbase 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.7" data-path="../bigdata/spark.html">
            
                <a href="../bigdata/spark.html">
            
                    
                    spark 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.8" data-path="../bigdata/spark_sql.html">
            
                <a href="../bigdata/spark_sql.html">
            
                    
                    spark sql 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.9" data-path="../bigdata/storm.html">
            
                <a href="../bigdata/storm.html">
            
                    
                    storm 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.10" data-path="../bigdata/scala.html">
            
                <a href="../bigdata/scala.html">
            
                    
                    scala 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.11" data-path="../bigdata/sqoop.html">
            
                <a href="../bigdata/sqoop.html">
            
                    
                    sqoop 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.12" data-path="../bigdata/flink.html">
            
                <a href="../bigdata/flink.html">
            
                    
                    flink 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.13" data-path="../bigdata/flume.html">
            
                <a href="../bigdata/flume.html">
            
                    
                    flume 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.14" data-path="../bigdata/elasticsearch.html">
            
                <a href="../bigdata/elasticsearch.html">
            
                    
                    elasticsearch 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.15" data-path="../bigdata/etl.html">
            
                <a href="../bigdata/etl.html">
            
                    
                    ETL 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.16" data-path="../bigdata/mapreduce.html">
            
                <a href="../bigdata/mapreduce.html">
            
                    
                    mapreduce 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.17" data-path="../bigdata/numpy.html">
            
                <a href="../bigdata/numpy.html">
            
                    
                    numpy 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.18" data-path="../bigdata/pandas.html">
            
                <a href="../bigdata/pandas.html">
            
                    
                    pandas 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.19" data-path="../bigdata/pyhdfs.html">
            
                <a href="../bigdata/pyhdfs.html">
            
                    
                    pyhdfs 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.20" data-path="../bigdata/reptile.html">
            
                <a href="../bigdata/reptile.html">
            
                    
                    reptile 爬虫相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.21" data-path="../bigdata/pyecharts.html">
            
                <a href="../bigdata/pyecharts.html">
            
                    
                    pyecharts 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.22" data-path="../bigdata/matplotlib.html">
            
                <a href="../bigdata/matplotlib.html">
            
                    
                    matplotlib 相关
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    机器学习相关
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../ai/clawdbot.html">
            
                <a href="../ai/clawdbot.html">
            
                    
                    clawdbot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../ai/langgraph.html">
            
                <a href="../ai/langgraph.html">
            
                    
                    LangGraph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../ai/mcp_functioncall.html">
            
                <a href="../ai/mcp_functioncall.html">
            
                    
                    MCP And Function Call
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="../ai/ollama_vllm.html">
            
                <a href="../ai/ollama_vllm.html">
            
                    
                    ollama and vllm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="../ai/ML.html">
            
                <a href="../ai/ML.html">
            
                    
                    ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="../ai/tensorflow_and_keras.html">
            
                <a href="../ai/tensorflow_and_keras.html">
            
                    
                    tensorflow 和 keras 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.7" data-path="../ai/cifar_10.html">
            
                <a href="../ai/cifar_10.html">
            
                    
                    cifar-10 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.8" data-path="../ai/darknet_to_caffe.html">
            
                <a href="../ai/darknet_to_caffe.html">
            
                    
                    Darknet to Caffe
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
                <span>
            
                    
                    其他
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../other/nativefier.html">
            
                <a href="../other/nativefier.html">
            
                    
                    Nativefier 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../other/ptp.html">
            
                <a href="../other/ptp.html">
            
                    
                    ptp 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../other/xenserver.html">
            
                <a href="../other/xenserver.html">
            
                    
                    xenserver 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="../other/computer_network_foundation.html">
            
                <a href="../other/computer_network_foundation.html">
            
                    
                    计算机网络基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="../other/ovirt.html">
            
                <a href="../other/ovirt.html">
            
                    
                    Ovirt 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="../other/mqtt.html">
            
                <a href="../other/mqtt.html">
            
                    
                    MQTT 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="../other/kafka.html">
            
                <a href="../other/kafka.html">
            
                    
                    Kafka 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="../other/pyqt5.html">
            
                <a href="../other/pyqt5.html">
            
                    
                    PyQt5 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="../other/ionic_cordova.html">
            
                <a href="../other/ionic_cordova.html">
            
                    
                    ionic 、cordova  编译 andriod
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.10" data-path="../other/cloudfoundry.html">
            
                <a href="../other/cloudfoundry.html">
            
                    
                    cloudfoundry 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.11" data-path="../other/svn.html">
            
                <a href="../other/svn.html">
            
                    
                    svn 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.12" data-path="../other/anaconda.html">
            
                <a href="../other/anaconda.html">
            
                    
                    anaconda 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.13" data-path="../other/jupyter.html">
            
                <a href="../other/jupyter.html">
            
                    
                    jupyter 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.14" data-path="../other/webdriver.html">
            
                <a href="../other/webdriver.html">
            
                    
                    webdriver 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.15" data-path="../other/java.html">
            
                <a href="../other/java.html">
            
                    
                    Java 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.16" data-path="../other/websocket.html">
            
                <a href="../other/websocket.html">
            
                    
                    websocket 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.17" data-path="../other/stratos_ui.html">
            
                <a href="../other/stratos_ui.html">
            
                    
                    stratos-ui 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.18" data-path="../other/apidoc.html">
            
                <a href="../other/apidoc.html">
            
                    
                    apidoc 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.19" data-path="../other/keepalived.html">
            
                <a href="../other/keepalived.html">
            
                    
                    keepalived 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.20" data-path="../other/linux_desktop_rdp.html">
            
                <a href="../other/linux_desktop_rdp.html">
            
                    
                    Linux Desktop rdp 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.21" data-path="../other/gitbook.html">
            
                <a href="../other/gitbook.html">
            
                    
                    GitBook 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.22" data-path="../other/github_pages.html">
            
                <a href="../other/github_pages.html">
            
                    
                    GitHub Pages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.23" data-path="../other/web.html">
            
                <a href="../other/web.html">
            
                    
                    Web 相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.24" data-path="../other/build_atlas.html">
            
                <a href="../other/build_atlas.html">
            
                    
                    Atlas 驱动构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.25" data-path="../other/be_mined.html">
            
                <a href="../other/be_mined.html">
            
                    
                    记一次被挖矿
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Heat 相关</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="heat&#x76F8;&#x5173;">heat&#x76F8;&#x5173;</h1>
<pre><code>read -p &quot;how many groups do you want:&quot; groups
read -p &quot;private_net_name:&quot; private_net_name

for((i=1;i&lt;=$groups;i++));do
heat stack-create -f /root/bigdata.yaml -P &quot;private_net_name=&quot;$private_net_name$i&quot;_private_net&quot; hadoop_$i
done
</code></pre><pre><code>heat_template_version: 2013-05-23

description: &gt;
  HOT template to create a new neutron network plus a router to the public
  network, and for deploying two servers into the new network. The template also
  assigns floating IP addresses to each server so they are routable from the
  public network.

parameters:
  myimage:
    type: string
    description: testsssssssssssssssssssssssss
    constraints:
      - custom_constraint: glance.image
    default: c1026774-a7ed-4dd3-8b1e-0f67b87b42af

  myname:
    type: string
    description: myname
    default: ttttt

  key_name:
    type: string
    description: Name of keypair to assign to servers
    constraints:
      - custom_constraint: nova.keypair
    default: mykey

  flavor:
    type: string
    description: Flavor to use for servers
    constraints:
      - custom_constraint: nova.flavor
    default: 7377696f-dd6b-41bd-85ec-2043dbebcc5e

  networks:
    type: string
    description: Name of an existing to use for the server
    constraints:
      - custom_constraint: neutron.network


resources:
  servertest:
    type: OS::Nova::Server
    properties:
      name: { get_param: myname }
      image: { get_param: myimage }
      flavor: { get_param: flavor }
      key_name: { get_param: key_name }
      networks: [{ &apos;network&apos;:{ get_param: networks}}]
</code></pre><pre><code>heat_template_version: 2013-05-23

description: &gt;
  HOT template to create a new neutron network plus a router to the public
  network, and for deploying two servers into the new network. The template also
  assigns floating IP addresses to each server so they are routable from the
  public network.
parameters:
  key_name:
    type: string
    description: Name of keypair to assign to servers
    constraints:
      - custom_constraint: nova.keypair
    default: mykey
  image:
    type: string
    description: Name of image to use for servers
    constraints:
      - custom_constraint: glance.image
    default: 16fa0162-35d7-4e92-8591-4f60f88c57f3
  image_desktop:
    type: string
    description: Name of image to use for servers
    constraints:
      - custom_constraint: glance.image
    default: 0b0147f5-34d2-47c3-b20b-82513caf6f83 
  flavor:
    type: string
    description: Flavor to use for servers
    constraints:
      - custom_constraint: nova.flavor
    default: 335eb246-f1c9-426f-a4da-36c5e71741a9
  flavor_desktop:
    type: string
    description: Flavor to use for desktops
    constraints:
      - custom_constraint: nova.flavor
    default: 335eb246-f1c9-426f-a4da-36c5e71741a9
  login_pass:
    type: string
    description: Login password
    hidden: false
    default: 123456
  public_net:
    type: string
    description: &gt;
      ID or name of public network for which floating IP addresses will be allocated
    constraints:
      - custom_constraint: neutron.network
    default: 1f6a08a2-421e-4449-a768-095426d829e8
  private_net_name:
    type: string
    description: Name of private network to be created
  private_net_cidr:
    type: string
    description: Private network address (CIDR notation)
    default: 192.168.1.0/24
  private_net_gateway:
    type: string
    description: Private network gateway address
    default: 192.168.1.254
  private_net_pool_begin:
    type: string
    description: Start of private network IP address allocation pool
    default: 192.168.1.1
  private_net_pool_end:
    type: string
    description: End of private network IP address allocation pool
    default: 192.168.1.253
  dns_nameservers:
    type: string
    description: A specified set of DNS name servers to be used
    default: 192.168.90.127

resources:
  private_net:
    type: OS::Neutron::Net
    properties:
      name: { get_param: private_net_name }

  private_subnet:
    type: OS::Neutron::Subnet
    properties:
      network_id: { get_resource: private_net }
      cidr: { get_param: private_net_cidr }
      gateway_ip: { get_param: private_net_gateway }
      dns_nameservers: [{ get_param: dns_nameservers}]
      allocation_pools:
        - start: { get_param: private_net_pool_begin }
          end: { get_param: private_net_pool_end }

  router:
    type: OS::Neutron::Router
    properties:
      external_gateway_info:
        network: { get_param: public_net }

  router_interface:
    type: OS::Neutron::RouterInterface
    properties:
      router_id: { get_resource: router }
      subnet_id: { get_resource: private_subnet }

  server1_port:
    type: OS::Neutron::Port
    properties:
      network_id: { get_resource: private_net }
      fixed_ips: [{ &apos;ip_address&apos;: 192.168.1.2}]

  server1_floating_ip:
    type: OS::Neutron::FloatingIP
    properties:
      floating_network: { get_param: public_net }
      port_id: { get_resource: server1_port }

  server1:
    type: OS::Nova::Server
    properties:
      name: Master
      image: { get_param: image }
      flavor: { get_param: flavor }
      key_name: { get_param: key_name }
      networks:
        - port: { get_resource: server1_port }
      user_data:
        str_replace:
          template: |
            #!/bin/bash

            #change login password

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo passwd root
            set timeout -1
            expect {
                    &quot;Enter new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;; 
                            exp_continue 
                    }
                    &quot;Retype new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;
                    }
            }
            expect eof
            EOF

            #pull packages
            scp_ip=192.168.65.241
            scp_passwd=handgecloud

            /usr/bin/expect &lt;&lt; EOF
            spawn scp -r root@$scp_ip:/mnt/ramdisk/opt.tgz /
            expect {
                    &quot;*(yes/no)?&quot; { 
                            send &quot;yes\n&quot;; 
                            exp_continue 
                    }
                    &quot;*password:&quot; { 
                            send &quot;$scp_passwd\n&quot;
                    }
            }
            set timeout -1
            expect eof
            EOF

            cd /
            pigz -d /opt.tgz
            tar -xf /opt.tar
            rm /opt.tar

            #vim hosts
            echo &quot;192.168.1.2 Master master&quot; &gt;&gt; /etc/hosts
            echo &quot;192.168.1.3 Slave1 slave1&quot; &gt;&gt; /etc/hosts
            echo &quot;192.168.1.4 Slave2 slave2&quot; &gt;&gt; /etc/hosts
            sed -i &quot;s/127.0.1.1/ /g&quot; /etc/hosts
            sed -i &quot;s/ubuntu/ /g&quot; /etc/hosts

            #ENV
            echo &quot;export JAVA_HOME=/opt/jdk1.8.0_111&quot; &gt;&gt; ~/.bashrc
            echo &quot;export HADOOP_HOME=/opt/hadoop-2.7.3&quot; &gt;&gt; ~/.bashrc
            echo &quot;export HBASE_HOME=/opt/hbase-1.2.3&quot; &gt;&gt; ~/.bashrc
            echo &quot;export ZOOKEEPER_HOME=/opt/zookeeper-3.4.9&quot; &gt;&gt; ~/.bashrc
            echo &apos;export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$JAVA_HOME/bin:$HBASE_HOME/bin:$HBASE_HOME/sbin:$ZOOKEEPER_HOME/bin:$PATH&apos; &gt;&gt; ~/.bashrc
            source ~/.bashrc
            sed -i &apos;s/JAVA_HOME=${JAVA_HOME}/JAVA_HOME=\/opt\/jdk1.8.0_111/g&apos; /opt/hadoop-2.7.3/etc/hadoop/hadoop-env.sh

            ##########################HADOOP####################

            #configure /opt/hadoop-2.7.3/etc/hadoop/slaves
            echo &quot;Slave1&quot; &gt; /opt/hadoop-2.7.3/etc/hadoop/slaves
            echo &quot;Slave2&quot; &gt;&gt; /opt/hadoop-2.7.3/etc/hadoop/slaves

            touch /opt/hadoop-2.7.3/etc/hadoop/master
            echo &quot;Master&quot; &gt; /opt/hadoop-2.7.3/etc/hadoop/master

            #configure /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;21i &lt;name&gt;fs.defaultFS&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;22i &lt;value&gt;hdfs://Master:9000&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;25i &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;26i &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;27i &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;28i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;21i &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;22i &lt;value&gt;Master:50070&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;25i &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;26i &lt;value&gt;Master:50090&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;29i &lt;name&gt;dfs.replication&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;30i &lt;value&gt;1&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;32i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;33i &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;34i &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;35i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;36i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;37i &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;38i &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;39i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            mv /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml.template /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;21i &lt;name&gt;mapreduce.framework.name&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;22i &lt;value&gt;yarn&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;25i &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;26i &lt;value&gt;Master:10020&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;29i &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;30i &lt;value&gt;Master:19888&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;18i &lt;property&gt; &apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;19i &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;20i &lt;value&gt;Master&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;21i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;22i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;23i &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;24i &lt;value&gt;mapreduce_shuffle&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;25i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml

            #Instantiate NameNode


            ####################################ZOO KEEPER####################################

            #configure /opt/zookeeper-3.4.9/conf/zoo.cfg
            mv /opt/zookeeper-3.4.9/conf/zoo_sample.cfg /opt/zookeeper-3.4.9/conf/zoo.cfg
            sed -i &apos;s/dataDir=\/tmp\/zookeeper/dataDir=\/opt\/zookeeper-3.4.9\/data/g&apos; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.0=Master:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.1=Slave1:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.2=Slave2:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            mkdir /opt/zookeeper-3.4.9/data/
            touch /opt/zookeeper-3.4.9/data/myid

            echo &apos;0&apos;&gt; /opt/zookeeper-3.4.9/data/myid

            sed -i &apos;131i JAVA=/opt/jdk1.8.0_111/bin/java&apos; /opt/zookeeper-3.4.9/bin/zkServer.sh

            ####################################HBASE#########################################

            #configure /opt/hbase-1.2.3/conf/hbase-env.sh
            echo &quot;export JAVA_HOME=/opt/jdk1.8.0_111&quot; &gt;&gt; /opt/hbase-1.2.3/conf/hbase-env.sh
            echo &quot;export HBASE_MANAGES_ZK=false&quot; &gt;&gt; /opt/hbase-1.2.3/conf/hbase-env.sh

            #configure /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;25i &lt;name&gt;hbase.rootdir&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;26i &lt;value&gt;hdfs://Master:9000/hbase&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;29i &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;30i &lt;value&gt;true&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;32i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;33i &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;34i &lt;value&gt;Master,Slave1,Slave2&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;35i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;36i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;37i &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;38i &lt;value&gt;/opt/zookeeper-3.4.9/data/&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;39i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml

            #configure /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Master&apos; &gt; /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Slave1&apos; &gt;&gt; /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Slave2&apos; &gt;&gt; /opt/hbase-1.2.3/conf/regionservers

            echo &apos;#!/bin/bash

            passwd=login_pass

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo ssh-keygen -P &quot;&quot;
            expect {
                    &quot;Enter file in*&quot; { 
                            send &quot;\n&quot;;
                            exp_continue 
                    }
                    &quot;Overwrite (y/n)*&quot; { 
                            send &quot;y\n&quot; 
                    }
                    &quot;The key*&quot; {
                            send_user &quot;\n&quot;
                    }
            }
            set timeout -1
            expect eof
            EOF

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo ssh-copy-id root@Master
            set timeout -1
            expect {
                    &quot;*(yes/no)?&quot; { 
                            send &quot;yes\n&quot;;
                            exp_continue 
                    } 
                    &quot;*password:&quot; { 
                    send &quot;$passwd\n&quot; 
                    }
                    &quot;Now try logging into*&quot; {
                            send_user &quot;\n&quot;
                    }
            }
            expect eof
            EOF

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo ssh-copy-id 0.0.0.0
            set timeout -1
            expect {
                    &quot;*(yes/no)?&quot; { 
                        send &quot;yes\n&quot;
                    } 
            }
            expect eof
            EOF

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo ssh-copy-id localhost
            expect {
                    &quot;*(yes/no)?&quot; { 
                        send &quot;yes\n&quot;
                    } 
            }
            expect eof
            EOF

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo ssh-copy-id root@Slave1
            set timeout -1
            expect {
                    &quot;*(yes/no)?&quot; { 
                        send &quot;yes\n&quot;;
                        exp_continue 
                    } 
                    &quot;*password:&quot; { 
                    send &quot;$passwd\n&quot; 
                    }
            }
            expect eof
            EOF

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo ssh-copy-id root@Slave2
            set timeout -1
            expect {
                    &quot;*(yes/no)?&quot; { 
                        send &quot;yes\n&quot;;
                        exp_continue 
                    } 
                    &quot;*password:&quot; { 
                    send &quot;$passwd\n&quot; 
                    }
            }
            expect eof
            EOF

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo /opt/hadoop-2.7.3/bin/hdfs namenode -format
            expect {
                    &quot;Re-format*&quot; { 
                        send &quot;Y\n&quot;;
                    }
            }
            expect eof
            EOF

            /opt/hadoop-2.7.3/sbin/start-dfs.sh

            /opt/hadoop-2.7.3/sbin/start-yarn.sh

            /opt/hadoop-2.7.3/sbin/mr-jobhistory-daemon.sh start historyserver

            /opt/zookeeper-3.4.9/bin/zkServer.sh start

            ssh root@slave1 &quot;/opt/zookeeper-3.4.9/bin/zkServer.sh start&quot;

            ssh root@slave2 &quot;/opt/zookeeper-3.4.9/bin/zkServer.sh start&quot;

            /opt/hbase-1.2.3/bin/start-hbase.sh&apos; | tee &gt; /root/start.sh

            chmod 777 /root/start.sh

            nohup /root/start.sh &gt; /root/start.log

            #echo Login password

            echo  &quot;######################################################&quot;
            echo  &quot;######################################################&quot;
            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass
            echo  &quot;######################################################&quot;
            echo  &quot;######################################################&quot;

            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass | tee &gt; /root/Login_Password

          params:
            login_pass: { get_param: login_pass }


  server2_port:
    type: OS::Neutron::Port
    properties:
      network_id: { get_resource: private_net }
      fixed_ips: [{ &apos;ip_address&apos;: 192.168.1.3}]

  server2:
    type: OS::Nova::Server
    properties:
      name: Slave1
      image: { get_param: image }
      flavor: { get_param: flavor }
      key_name: { get_param: key_name }
      networks:
        - port: { get_resource: server2_port }
      user_data:
        str_replace:
          template: |
            #!/bin/bash

            #change login password

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo passwd root
            set timeout -1
            expect {
                    &quot;Enter new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;; 
                            exp_continue 
                    }
                    &quot;Retype new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;
                    }
            }
            expect eof
            EOF

            #pull packages
            scp_ip=192.168.65.241
            scp_passwd=handgecloud

            /usr/bin/expect &lt;&lt; EOF
            spawn scp -r root@$scp_ip:/mnt/ramdisk/opt.tgz /
            expect {
                    &quot;*(yes/no)?&quot; { 
                            send &quot;yes\n&quot;; 
                            exp_continue 
                    }
                    &quot;*password:&quot; { 
                            send &quot;$scp_passwd\n&quot;
                    }
            }
            set timeout -1
            expect eof
            EOF

            cd /
            pigz -d /opt.tgz
            tar -xf /opt.tar
            rm /opt.tar

            #vim hosts
            echo &quot;192.168.1.2 Master master&quot; &gt;&gt; /etc/hosts
            echo &quot;192.168.1.3 Slave1 slave1&quot; &gt;&gt; /etc/hosts
            echo &quot;192.168.1.4 Slave2 slave2&quot; &gt;&gt; /etc/hosts

            #ENV
            echo &quot;export JAVA_HOME=/opt/jdk1.8.0_111&quot; &gt;&gt; ~/.bashrc
            echo &quot;export HADOOP_HOME=/opt/hadoop-2.7.3&quot; &gt;&gt; ~/.bashrc
            echo &quot;export HBASE_HOME=/opt/hbase-1.2.3&quot; &gt;&gt; ~/.bashrc
            echo &quot;export ZOOKEEPER_HOME=/opt/zookeeper-3.4.9&quot; &gt;&gt; ~/.bashrc
            echo &apos;export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$JAVA_HOME/bin:$HBASE_HOME/bin:$HBASE_HOME/sbin:$ZOOKEEPER_HOME/bin:$PATH&apos; &gt;&gt; ~/.bashrc
            source ~/.bashrc
            sed -i &apos;s/JAVA_HOME=${JAVA_HOME}/JAVA_HOME=\/opt\/jdk1.8.0_111/g&apos; /opt/hadoop-2.7.3/etc/hadoop/hadoop-env.sh

            ##########################HADOOP####################

            #configure /opt/hadoop-2.7.3/etc/hadoop/slaves
            echo &quot;Slave1&quot; &gt; /opt/hadoop-2.7.3/etc/hadoop/slaves
            echo &quot;Slave2&quot; &gt;&gt; /opt/hadoop-2.7.3/etc/hadoop/slaves

            touch /opt/hadoop-2.7.3/etc/hadoop/master
            echo &quot;Master&quot; &gt; /opt/hadoop-2.7.3/etc/hadoop/master

            #configure /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;21i &lt;name&gt;fs.defaultFS&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;22i &lt;value&gt;hdfs://Master:9000&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;25i &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;26i &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;27i &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;28i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;21i &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;22i &lt;value&gt;Master:50070&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;25i &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;26i &lt;value&gt;Master:50090&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;29i &lt;name&gt;dfs.replication&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;30i &lt;value&gt;1&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;32i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;33i &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;34i &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;35i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;36i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;37i &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;38i &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;39i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml


            #configure /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            mv /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml.template /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;21i &lt;name&gt;mapreduce.framework.name&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;22i &lt;value&gt;yarn&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;25i &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;26i &lt;value&gt;Master:10020&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;29i &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;30i &lt;value&gt;Master:19888&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;18i &lt;property&gt; &apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;19i &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;20i &lt;value&gt;Master&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;21i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;22i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;23i &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;24i &lt;value&gt;mapreduce_shuffle&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;25i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml

            ####################################ZOO KEEPER####################################

            #configure /opt/zookeeper-3.4.9/conf/zoo.cfg
            mv /opt/zookeeper-3.4.9/conf/zoo_sample.cfg /opt/zookeeper-3.4.9/conf/zoo.cfg
            sed -i &apos;s/dataDir=\/tmp\/zookeeper/dataDir=\/opt\/zookeeper-3.4.9\/data/g&apos; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.0=Master:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.1=Slave1:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.2=Slave2:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            mkdir /opt/zookeeper-3.4.9/data/
            touch /opt/zookeeper-3.4.9/data/myid

            echo &apos;1&apos;&gt; /opt/zookeeper-3.4.9/data/myid

            sed -i &apos;131i JAVA=/opt/jdk1.8.0_111/bin/java&apos; /opt/zookeeper-3.4.9/bin/zkServer.sh

            ####################################HBASE#########################################

            #configure /opt/hbase-1.2.3/conf/hbase-env.sh
            echo &quot;export JAVA_HOME=/opt/jdk1.8.0_111&quot; &gt;&gt; /opt/hbase-1.2.3/conf/hbase-env.sh
            echo &quot;export HBASE_MANAGES_ZK=false&quot; &gt;&gt; /opt/hbase-1.2.3/conf/hbase-env.sh

            #configure /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;25i &lt;name&gt;hbase.rootdir&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;26i &lt;value&gt;hdfs://Master:9000/hbase&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;29i &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;30i &lt;value&gt;true&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;32i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;33i &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;34i &lt;value&gt;Master,Slave1,Slave2&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;35i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;36i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;37i &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;38i &lt;value&gt;/opt/zookeeper-3.4.9/data/&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;39i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml

            #configure /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Master&apos; &gt; /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Slave1&apos; &gt;&gt; /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Slave2&apos; &gt;&gt; /opt/hbase-1.2.3/conf/regionservers

            #echo Login password

            echo  &quot;######################################################&quot;
            echo  &quot;######################################################&quot;
            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass
            echo  &quot;######################################################&quot;
            echo  &quot;######################################################&quot;

            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass | tee &gt; /root/Login_Password

          params:
            login_pass: { get_param: login_pass }

  server3_port:
    type: OS::Neutron::Port
    properties:
      network_id: { get_resource: private_net }
      fixed_ips: [{ &apos;ip_address&apos;: 192.168.1.4}]

  server3:
    type: OS::Nova::Server
    properties:
      name: Slave2
      image: { get_param: image }
      flavor: { get_param: flavor }
      key_name: { get_param: key_name }
      networks:
        - port: { get_resource: server3_port }
      user_data:
        str_replace:
          template: |
            #!/bin/bash

            #change login password

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo passwd root
            set timeout -1
            expect {
                    &quot;Enter new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;; 
                            exp_continue 
                    }
                    &quot;Retype new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;
                    }
            }
            expect eof
            EOF

            #pull packages
            scp_ip=192.168.65.241
            scp_passwd=handgecloud

            /usr/bin/expect &lt;&lt; EOF
            spawn scp -r root@$scp_ip:/mnt/ramdisk/opt.tgz /
            expect {
                    &quot;*(yes/no)?&quot; { 
                            send &quot;yes\n&quot;; 
                            exp_continue 
                    }
                    &quot;*password:&quot; { 
                            send &quot;$scp_passwd\n&quot;
                    }
            }
            set timeout -1
            expect eof
            EOF

            cd /
            pigz -d /opt.tgz
            tar -xf /opt.tar
            rm /opt.tar

            #vim hosts
            echo &quot;192.168.1.2 Master master&quot; &gt;&gt; /etc/hosts
            echo &quot;192.168.1.3 Slave1 slave1&quot; &gt;&gt; /etc/hosts
            echo &quot;192.168.1.4 Slave2 slave2&quot; &gt;&gt; /etc/hosts

            #ENV
            echo &quot;export JAVA_HOME=/opt/jdk1.8.0_111&quot; &gt;&gt; ~/.bashrc
            echo &quot;export HADOOP_HOME=/opt/hadoop-2.7.3&quot; &gt;&gt; ~/.bashrc
            echo &quot;export HBASE_HOME=/opt/hbase-1.2.3&quot; &gt;&gt; ~/.bashrc
            echo &quot;export ZOOKEEPER_HOME=/opt/zookeeper-3.4.9&quot; &gt;&gt; ~/.bashrc
            echo &apos;export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$JAVA_HOME/bin:$HBASE_HOME/bin:$HBASE_HOME/sbin:$ZOOKEEPER_HOME/bin:$PATH&apos; &gt;&gt; ~/.bashrc
            source ~/.bashrc
            sed -i &apos;s/JAVA_HOME=${JAVA_HOME}/JAVA_HOME=\/opt\/jdk1.8.0_111/g&apos; /opt/hadoop-2.7.3/etc/hadoop/hadoop-env.sh

            ##########################HADOOP####################

            #configure /opt/hadoop-2.7.3/etc/hadoop/slaves
            echo &quot;Slave1&quot; &gt; /opt/hadoop-2.7.3/etc/hadoop/slaves
            echo &quot;Slave2&quot; &gt;&gt; /opt/hadoop-2.7.3/etc/hadoop/slaves

            touch /opt/hadoop-2.7.3/etc/hadoop/master
            echo &quot;Master&quot; &gt; /opt/hadoop-2.7.3/etc/hadoop/master

            #configure /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;21i &lt;name&gt;fs.defaultFS&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;22i &lt;value&gt;hdfs://Master:9000&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;25i &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;26i &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;27i &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml
            sed -i &apos;28i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/core-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;21i &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;22i &lt;value&gt;Master:50070&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;25i &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;26i &lt;value&gt;Master:50090&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;29i &lt;name&gt;dfs.replication&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;30i &lt;value&gt;1&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;32i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;33i &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;34i &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;35i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;36i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;37i &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;38i &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml
            sed -i &apos;39i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/hdfs-site.xml


            #configure /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            mv /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml.template /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;20i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;21i &lt;name&gt;mapreduce.framework.name&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;22i &lt;value&gt;yarn&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;23i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;25i &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;26i &lt;value&gt;Master:10020&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;29i &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;30i &lt;value&gt;Master:19888&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/mapred-site.xml

            #configure /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;18i &lt;property&gt; &apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;19i &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;20i &lt;value&gt;Master&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;21i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;22i &lt;property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;23i &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;24i &lt;value&gt;mapreduce_shuffle&lt;/value&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml
            sed -i &apos;25i &lt;/property&gt;&apos; /opt/hadoop-2.7.3/etc/hadoop/yarn-site.xml

            ####################################ZOO KEEPER####################################

            #configure /opt/zookeeper-3.4.9/conf/zoo.cfg
            mv /opt/zookeeper-3.4.9/conf/zoo_sample.cfg /opt/zookeeper-3.4.9/conf/zoo.cfg
            sed -i &apos;s/dataDir=\/tmp\/zookeeper/dataDir=\/opt\/zookeeper-3.4.9\/data/g&apos; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.0=Master:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.1=Slave1:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            echo &quot;server.2=Slave2:2888:3888&quot; &gt;&gt; /opt/zookeeper-3.4.9/conf/zoo.cfg
            mkdir /opt/zookeeper-3.4.9/data/
            touch /opt/zookeeper-3.4.9/data/myid

            echo &apos;2&apos;&gt; /opt/zookeeper-3.4.9/data/myid

            sed -i &apos;131i JAVA=/opt/jdk1.8.0_111/bin/java&apos; /opt/zookeeper-3.4.9/bin/zkServer.sh

            ####################################HBASE#########################################

            #configure /opt/hbase-1.2.3/conf/hbase-env.sh
            echo &quot;export JAVA_HOME=/opt/jdk1.8.0_111&quot; &gt;&gt; /opt/hbase-1.2.3/conf/hbase-env.sh
            echo &quot;export HBASE_MANAGES_ZK=false&quot; &gt;&gt; /opt/hbase-1.2.3/conf/hbase-env.sh

            #configure /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;24i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;25i &lt;name&gt;hbase.rootdir&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;26i &lt;value&gt;hdfs://Master:9000/hbase&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;27i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;28i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;29i &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;30i &lt;value&gt;true&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;31i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;32i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;33i &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;34i &lt;value&gt;Master,Slave1,Slave2&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;35i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;36i &lt;property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;37i &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;38i &lt;value&gt;/opt/zookeeper-3.4.9/data/&lt;/value&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml
            sed -i &apos;39i &lt;/property&gt;&apos; /opt/hbase-1.2.3/conf/hbase-site.xml

            #configure /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Master&apos; &gt; /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Slave1&apos; &gt;&gt; /opt/hbase-1.2.3/conf/regionservers
            echo &apos;Slave2&apos; &gt;&gt; /opt/hbase-1.2.3/conf/regionservers

            #echo Login password

            echo  &quot;######################################################&quot;
            echo  &quot;######################################################&quot;
            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass
            echo  &quot;######################################################&quot;
            echo  &quot;######################################################&quot;

            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass | tee &gt; /root/Login_Password

          params:
            login_pass: { get_param: login_pass }

  server4_port:
    type: OS::Neutron::Port
    properties:
      network_id: { get_resource: private_net }
      fixed_ips: [{ &apos;ip_address&apos;: 192.168.1.5}]

  server4_floating_ip:
    type: OS::Neutron::FloatingIP
    properties:
      floating_network: { get_param: public_net }
      port_id: { get_resource: server4_port }

  server4:
    type: OS::Nova::Server
    properties:
      name: dev1
      image: { get_param: image_desktop }
      flavor: { get_param: flavor_desktop }
      key_name: { get_param: key_name }
      networks:
        - port: { get_resource: server4_port }
      user_data:
        str_replace:
          template: |
            #!/bin/bash

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo passwd root
            set timeout -1
            expect {
                    &quot;Enter new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;; 
                            exp_continue 
                    }
                    &quot;Retype new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;
                    }
            }
            expect eof
            EOF

            sed -i &quot;s/localhost/localhost dev1/g&quot; /etc/hosts

            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass | tee &gt; /root/Login_Password

          params:
            login_pass: { get_param: login_pass }

  server5_port:
    type: OS::Neutron::Port
    properties:
      network_id: { get_resource: private_net }
      fixed_ips: [{ &apos;ip_address&apos;: 192.168.1.6}]

  server5_floating_ip:
    type: OS::Neutron::FloatingIP
    properties:
      floating_network: { get_param: public_net }
      port_id: { get_resource: server5_port }

  server5:
    type: OS::Nova::Server
    properties:
      name: dev2
      image: { get_param: image_desktop }
      flavor: { get_param: flavor_desktop }
      key_name: { get_param: key_name }
      networks:
        - port: { get_resource: server5_port }
      user_data:
        str_replace:
          template: |
            #!/bin/bash

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo passwd root
            set timeout -1
            expect {
                    &quot;Enter new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;; 
                            exp_continue 
                    }
                    &quot;Retype new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;
                    }
            }
            expect eof
            EOF

            sed -i &quot;s/localhost/localhost dev2/g&quot; /etc/hosts

            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass | tee &gt; /root/Login_Password

          params:
            login_pass: { get_param: login_pass }

  server6_port:
    type: OS::Neutron::Port
    properties:
      network_id: { get_resource: private_net }
      fixed_ips: [{ &apos;ip_address&apos;: 192.168.1.7}]

  server6_floating_ip:
    type: OS::Neutron::FloatingIP
    properties:
      floating_network: { get_param: public_net }
      port_id: { get_resource: server6_port }

  server6:
    type: OS::Nova::Server
    properties:
      name: dev3
      image: { get_param: image_desktop }
      flavor: { get_param: flavor_desktop }
      key_name: { get_param: key_name }
      networks:
        - port: { get_resource: server6_port }
      user_data:
        str_replace:
          template: |
            #!/bin/bash

            /usr/bin/expect &lt;&lt; EOF
            spawn sudo passwd root
            set timeout -1
            expect {
                    &quot;Enter new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;; 
                            exp_continue 
                    }
                    &quot;Retype new UNIX password:&quot; { 
                            send &quot;login_pass\n&quot;
                    }
            }
            expect eof
            EOF

            sed -i &quot;s/localhost/localhost dev3/g&quot; /etc/hosts

            echo &quot;Login as &apos;root&apos; user. Default password: &quot;login_pass | tee &gt; /root/Login_Password

          params:
            login_pass: { get_param: login_pass }

outputs:
  server1:
    description: Login password of Master for user &apos;root&apos;
    value: {get_param: login_pass}
  server1_private_ip:
    description: IP address of Master in private network
    value: { get_attr: [ server1, first_address ] }
  server1_public_ip:
    description: Floating IP address of Master in public network
    value: { get_attr: [ server1_floating_ip, floating_ip_address ] }

  server2:
    description: Login password of Slave1 for user &apos;root&apos;
    value: {get_param: login_pass}
  server2_private_ip:
    description: IP address of Slave1 in private network
    value: { get_attr: [ server2, first_address ] }

  server3:
    description: Login password of Slave2 for user &apos;root&apos;
    value: {get_param: login_pass}
  server3_private_ip:
    description: IP address of Slave2 in private network
    value: { get_attr: [ server3, first_address ] }

  server4:
    description: Login password of dev1 for user &apos;ubuntu&apos;
    value: {get_param: login_pass}
  server4_private_ip:
    description: IP address of dev1 in private network
    value: { get_attr: [ server4, first_address ] }
  server4_public_ip:
    description: Floating IP address of ubuntu in public network
    value: { get_attr: [ server4_floating_ip, floating_ip_address ] }

  server5:
    description: Login password of dev2 for user &apos;ubuntu&apos;
    value: {get_param: login_pass}
  server5_private_ip:
    description: IP address of dev2 in private network
    value: { get_attr: [ server5, first_address ] }
  server5_public_ip:
    description: Floating IP address of ubuntu in public network
    value: { get_attr: [ server5_floating_ip, floating_ip_address ] }

  server6:
    description: Login password of dev3 for user &apos;ubuntu&apos;
    value: {get_param: login_pass}
  server6_private_ip:
    description: IP address of dev3 in private network
    value: { get_attr: [ server6, first_address ] }
  server6_public_ip:
    description: Floating IP address of ubuntu in public network
    value: { get_attr: [ server6_floating_ip, floating_ip_address ] }
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="devstack.html" class="navigation navigation-prev " aria-label="Previous page: Devstack 相关">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="qga.html" class="navigation navigation-next " aria-label="Next page: qemu-guest-agent 相关">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Heat 相关","level":"1.9.13","depth":2,"next":{"title":"qemu-guest-agent 相关","level":"1.9.14","depth":2,"path":"notes/openstack/qga.md","ref":"notes/openstack/qga.md","articles":[]},"previous":{"title":"Devstack 相关","level":"1.9.12","depth":2,"path":"notes/openstack/devstack.md","ref":"notes/openstack/devstack.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","-sharing","expandable-chapters","back-to-top-button","code","splitter","pageview-count","page-toc-button","github","hide-element"],"styles":{"pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"github":{"url":"https://github.com/hlyani"},"splitter":{},"search-pro":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"page-toc-button":{"maxTocDepth":"2","minTocSize":"2"},"back-to-top-button":{},"pageview-count":{},"theme-default":{"styles":{"pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css","website":"styles/website.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"hlyani","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"hlyani","gitbook":"*","description":"hl notes"},"file":{"path":"notes/openstack/heat.md","mtime":"2026-01-29T02:41:05.147Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2026-01-29T02:41:33.564Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

